jdk:
  - openjdk17

install:
  - echo "org.gradle.configuration-cache=false" >> gradle.properties
  - ./gradlew clean bundleStripeFatAar --no-configuration-cache

  # Кладём .aar туда, где JitPack ищет артефакты (внутрь модуля)
  - mkdir -p payments-core/build/outputs/aar
  - if [ -f build/build/outputs/fat-aar/stripe-android-lim.aar ]; then cp build/build/outputs/fat-aar/stripe-android-lim.aar payments-core/build/outputs/aar/; fi
  - if [ -f build/outputs/fat-aar/stripe-android-lim.aar ]; then cp build/outputs/fat-aar/stripe-android-lim.aar payments-core/build/outputs/aar/; fi

  # Проверим, что скопировалось
  - ls -R payments-core/build/outputs/aar
